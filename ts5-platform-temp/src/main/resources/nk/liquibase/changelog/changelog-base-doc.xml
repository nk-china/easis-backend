<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <!--
    -->

    <changeSet id="DEF_DOC_TYPE-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DEF_DOC_TYPE" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="DEF_DOC_TYPE" remarks="">
            <column name="DOC_TYPE"             type="${type.desc}"     remarks="单据类型"><constraints primaryKey="true" /></column>
            <column name="DOC_NAME"             type="${type.uuid}"     remarks="单据名称" />
            <column name="REF_OBJECT_TYPE"      type="${type.var} "     remarks="java扩展" />
            <column name="UPDATED_TIME"         type="${type.date}"     remarks="最后修改时间秒数" />
            <column name="WORDFLOW_REF_ID"      type="${type.uuid}"     remarks="" />
            <column name="WORKFLOW_START_STATE" type="${type.desc}"     remarks="" />
            <column name="VERSION"             	type="${type.int6}"     remarks="暂时不启用，默认为1"><constraints primaryKey="true" /></column>
            <column name="HEAD_VERSION"         type="${type.int6}"     remarks="暂时不启用" />
            <column name="DOC_CLASSIFY"         type="${type.desc}"     remarks="TP,PRODUCT,TRANSACTION" />
            <column name="VALID_FROM"           type="${type.desc}"     remarks="暂时不启用" />
            <column name="VALID_TO"             type="${type.desc}"     remarks="暂时不启用" />
            <column name="STATE"             	type="${type.desc}"     remarks="" />
            <column name="MARKDOWN_FLAG"        type="${type.int4}"     remarks="" />
            <column name="MARKDOWN"             type="${type.clob}"     remarks="" />
        </createTable>
    </changeSet>

    <changeSet id="DEF_DOC_TYPE-02" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="DEF_DOC_TYPE" columnName="REF_OBJECT_TYPE_OPTIONS" />
            </not>
        </preConditions>
        <addColumn tableName="DEF_DOC_TYPE">
            <column name="REF_OBJECT_TYPE_OPTIONS" type="${type.var2}" remarks="扩展对象的配置信息" />
        </addColumn>
    </changeSet>

    <changeSet id="DEF_DOC_STATUS-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DEF_DOC_STATUS" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="DEF_DOC_STATUS" remarks="">
            <column name="DOC_TYPE"             type="${type.desc}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="DOC_STATE"            type="${type.desc}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="DOC_STATE_DESC"       type="${type.desc}"     remarks="" />
            <column name="SYS_STATE"            type="${type.desc}"     remarks="" />
            <column name="REF_OBJECT_TYPE"      type="${type.var} "     remarks="业务逻辑处理类" />
            <column name="PRE_DOC_STATE"        type="${type.desc}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="EDIT_PERM"            type="${type.int6}"     remarks="0 不可编辑，1 可编辑，2 流程中可编辑" />
            <column name="UPDATED_TIME"         type="${type.date}"     remarks="" />
            <column name="ACTION"             	type="${type.desc}"     remarks="ACTIVATE, CANCEL" />
            <column name="VERSION"             	type="${type.int6}"     remarks="暂时不启用"><constraints primaryKey="true" /></column>
            <column name="ORDERBY"             	type="${type.int6}"     remarks="" />
        </createTable>
    </changeSet>

    <changeSet id="DEF_DOC_PROPS-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DEF_DOC_PROPS" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="DEF_DOC_PROPS" remarks="">
            <column name="ID"             		type="${type.uuid}"     remarks="" />
            <column name="KEY"             		type="${type.desc}"     remarks="" />
            <column name="VALUE"             	type="${type.desc}"     remarks="" />
            <column name="DOC_ID"             	type="${type.uuid}"     remarks="" />
        </createTable>
    </changeSet>

    <changeSet id="DEF_DOC_INDEX_RULE-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DEF_DOC_INDEX_RULE" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="DEF_DOC_INDEX_RULE" remarks="">
            <column name="DOC_TYPE"             type="${type.desc}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="VERSION"             	type="${type.int6}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="FIELD"             	type="${type.desc}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="RULE"             	type="${type.var} "     remarks="" />
            <column name="UPDATED_TIME"         type="${type.date}"     remarks="" />
        </createTable>
    </changeSet>

    <changeSet id="DEF_DOC_BPM-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DEF_DOC_BPM" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="DEF_DOC_BPM" remarks="">
            <column name="DOC_TYPE"             type="${type.cond}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="VERSION"             	type="${type.int6}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="START_BY"             type="${type.desc}"     remarks="" />
            <column name="ROLLBACK_TO"          type="${type.desc}"     remarks="" />
            <column name="UPDATED_TIME"         type="${type.date}"     remarks="" />
            <column name="PROCESS_KEY"          type="${type.uuid}"     remarks="" />
        </createTable>
    </changeSet>

    <changeSet id="DEF_DOC_COMPONENT-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="DEF_DOC_COMPONENT" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="DEF_DOC_COMPONENT" remarks="">
            <column name="DOC_TYPE"             type="${type.cond}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="COMPONENT"            type="${type.uuid}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="COMPONENT_MAPPING"    type="${type.uuid}"     remarks="" />
            <column name="COMPONENT_NAME"       type="${type.uuid}"     remarks="" />
            <column name="ORDERBY"             	type="${type.int6}"     remarks="" />
            <column name="ORDER_CALC"           type="${type.int6}"     remarks="" />
            <column name="TIMES_CALC"           type="${type.int4}"     remarks="" />
            <column name="EDITABLE_SP_E_L"      type="${type.var} "     remarks="" />
            <column name="UPDATED_TIME"         type="${type.date}"     remarks="" />
            <column name="VERSION"             	type="${type.int6}"     remarks="暂时不启用"><constraints primaryKey="true" /></column>
            <column name="MARKDOWN_FLAG"        type="${type.int4}"     remarks="" />
            <column name="MARKDOWN"             type="${type.clob}"     remarks="" />
        </createTable>
    </changeSet>

    <changeSet id="BIZ_DOC-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="BIZ_DOC" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="BIZ_DOC" remarks="">
            <column name="DOC_ID"             	type="${type.uuid}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="DOC_TYPE"           	type="${type.cond}"     remarks="" />
            <column name="DEF_VERSION"        	type="${type.int6}"     remarks="" />
            <column name="CREATED_TIME"       	type="${type.date}"     remarks="" />
            <column name="UPDATED_TIME"       	type="${type.date}"     remarks="" />
            <column name="CLASSIFY"           	type="${type.desc}"     remarks="" />
            <column name="DOC_NAME"           	type="${type.desc}"     remarks="" />
            <column name="DOC_DESC"           	type="${type.var}"      remarks="" />
            <column name="REF_OBJECT_ID"      	type="${type.uuid}"     remarks="" />
            <column name="DOC_NUMBER"         	type="${type.desc}"     remarks="" />
            <column name="DOC_STATE"          	type="${type.desc}"     remarks="" />
            <column name="DOC_TAGS"           	type="${type.desc}"     remarks="" />
            <column name="PRE_DOC_ID"         	type="${type.uuid}"     remarks="" />
            <column name="PARTNER_ID"         	type="${type.uuid}"     remarks="交易伙伴ID（注意是roleID）" />
            <column name="IDENTIFICATION"     	type="${type.uuid}"     remarks="" />
        </createTable>
    </changeSet>

    <changeSet id="BIZ_DOC_SYS_STATUS-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="BIZ_DOC_SYS_STATUS" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="BIZ_DOC_SYS_STATUS" remarks="">
            <column name="DOC_ID"             		type="${type.uuid}"     remarks=""><constraints primaryKey="true" /></column>
            <column name="SYS_STATE"             	type="${type.uuid}"     remarks=""><constraints primaryKey="true" /></column>
        </createTable>
    </changeSet>

    <changeSet id="BIZ_DOC_PROPS-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="BIZ_DOC_PROPS" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="BIZ_DOC_PROPS" remarks="">
            <column name="ID"             			type="${type.uuid}"     remarks="" />
            <column name="PROP_KEY"             	type="${type.desc}"     remarks="" />
            <column name="PROP_VALUE"           	type="${type.var1}"     remarks="" />
            <column name="DOC_ID"             		type="${type.uuid}"     remarks="" />
            <column name="ORDERBY"             		type="${type.int6}"     remarks="" />
        </createTable>
    </changeSet>

    <changeSet id="BIZ_DOC_FIELD-01" author="bean">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="BIZ_DOC_FIELD" />
            </not>
        </preConditions>
        <comment />
        <createTable tableName="BIZ_DOC_FIELD" remarks="">
            <column name="ID"             type="${type.uuid}"     remarks="" />
        </createTable>
    </changeSet>

</databaseChangeLog>